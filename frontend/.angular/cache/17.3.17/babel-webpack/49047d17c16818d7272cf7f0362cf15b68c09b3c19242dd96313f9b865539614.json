{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"../../services/api.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction HistorialPrestamosComponent_div_77_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 36)(1, \"div\", 37)(2, \"span\", 38);\n    i0.ɵɵtext(3, \"Cargando...\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"p\", 39);\n    i0.ɵɵtext(5, \"Cargando tu historial...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HistorialPrestamosComponent_div_78_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 40)(1, \"div\", 41);\n    i0.ɵɵtext(2, \"\\uD83D\\uDCDA\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h4\");\n    i0.ɵɵtext(4, \"No tienes pr\\u00E9stamos registrados\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 42);\n    i0.ɵɵtext(6, \"Cuando prestes un libro, aparecer\\u00E1 aqu\\u00ED tu historial.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HistorialPrestamosComponent_div_79_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 40)(1, \"div\", 41);\n    i0.ɵɵtext(2, \"\\uD83D\\uDD0D\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h4\");\n    i0.ɵɵtext(4, \"No se encontraron pr\\u00E9stamos\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 42);\n    i0.ɵɵtext(6, \"No hay pr\\u00E9stamos que coincidan con el filtro seleccionado.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HistorialPrestamosComponent_div_80_tr_19_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 61);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const prestamo_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", prestamo_r1.libro.categoria.nombre, \" \");\n  }\n}\nfunction HistorialPrestamosComponent_div_80_tr_19_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 62);\n    i0.ɵɵtext(1, \" \\u26A0\\uFE0F Vencido \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HistorialPrestamosComponent_div_80_tr_19_span_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 63);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const prestamo_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", prestamo_r1.diasRetraso, \" d\\u00EDas \");\n  }\n}\nfunction HistorialPrestamosComponent_div_80_tr_19_span_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 42);\n    i0.ɵɵtext(1, \"-\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HistorialPrestamosComponent_div_80_tr_19_strong_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\", 64);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const prestamo_r1 = i0.ɵɵnextContext().$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.formatearMoneda(prestamo_r1.valorMulta), \" \");\n  }\n}\nfunction HistorialPrestamosComponent_div_80_tr_19_span_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 42);\n    i0.ɵɵtext(1, \"-\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HistorialPrestamosComponent_div_80_tr_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 46)(1, \"td\", 47)(2, \"div\", 48)(3, \"strong\", 49);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 50)(6, \"small\", 51);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, HistorialPrestamosComponent_div_80_tr_19_span_8_Template, 2, 1, \"span\", 52);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"td\")(10, \"span\", 53);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"td\")(13, \"div\", 54)(14, \"span\", 53);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, HistorialPrestamosComponent_div_80_tr_19_span_16_Template, 2, 0, \"span\", 55);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"td\")(18, \"span\", 56);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"td\")(21, \"span\", 57);\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"td\");\n    i0.ɵɵtemplate(24, HistorialPrestamosComponent_div_80_tr_19_span_24_Template, 2, 1, \"span\", 58)(25, HistorialPrestamosComponent_div_80_tr_19_span_25_Template, 2, 0, \"span\", 59);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"td\");\n    i0.ɵɵtemplate(27, HistorialPrestamosComponent_div_80_tr_19_strong_27_Template, 2, 1, \"strong\", 60)(28, HistorialPrestamosComponent_div_80_tr_19_span_28_Template, 2, 0, \"span\", 59);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const prestamo_r1 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(prestamo_r1.libro.titulo);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(prestamo_r1.libro.autor);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", prestamo_r1.libro.categoria);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.formatearFecha(prestamo_r1.fechaPrestamo));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.formatearFecha(prestamo_r1.fechaLimite));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.estaVencido(prestamo_r1.fechaLimite) && prestamo_r1.estado === \"PRESTADO\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r1.getDiasRestantesClass(prestamo_r1.fechaLimite));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.calcularDiasRestantes(prestamo_r1.fechaLimite), \" d\\u00EDas \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r1.getEstadoBadgeClass(prestamo_r1.estado));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.getEstadoTexto(prestamo_r1.estado), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.tieneDiasRetraso(prestamo_r1));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.tieneDiasRetraso(prestamo_r1));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.tieneMulta(prestamo_r1));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.tieneMulta(prestamo_r1));\n  }\n}\nfunction HistorialPrestamosComponent_div_80_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43)(1, \"table\", 44)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"\\uD83D\\uDCD6 Libro\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"\\uD83D\\uDCC5 Fecha Pr\\u00E9stamo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"\\u23F0 Fecha L\\u00EDmite\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"\\u23F3 D\\u00EDas Restantes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"\\uD83D\\uDCCA Estado\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"\\u26A0\\uFE0F D\\u00EDas Retraso\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"th\");\n    i0.ɵɵtext(17, \"\\uD83D\\uDCB0 Multa\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(18, \"tbody\");\n    i0.ɵɵtemplate(19, HistorialPrestamosComponent_div_80_tr_19_Template, 29, 14, \"tr\", 45);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(19);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.filtrarPrestamos());\n  }\n}\nexport let HistorialPrestamosComponent = /*#__PURE__*/(() => {\n  class HistorialPrestamosComponent {\n    authService;\n    apiService;\n    router;\n    prestamos = [];\n    loading = false;\n    filtroEstado = 'TODOS'; // TODOS, PRESTADO, MULTA, DEVUELTO\n    constructor(authService, apiService, router) {\n      this.authService = authService;\n      this.apiService = apiService;\n      this.router = router;\n    }\n    ngOnInit() {\n      if (!this.authService.isLoggedIn()) {\n        alert('❌ Debes iniciar sesión para ver tu historial de préstamos.');\n        this.router.navigate(['/login']);\n        return;\n      }\n      this.cargarPrestamos();\n    }\n    cargarPrestamos() {\n      this.loading = true;\n      this.apiService.misPrestamos().subscribe({\n        next: prestamos => {\n          console.log('✅ Préstamos cargados:', prestamos.length);\n          this.prestamos = prestamos;\n          this.loading = false;\n        },\n        error: err => {\n          console.error('❌ Error al cargar préstamos:', err);\n          this.loading = false;\n          if (err.status === 401 || err.status === 403) {\n            alert('❌ Tu sesión ha expirado o no tienes permisos. Por favor, inicia sesión nuevamente.');\n            this.authService.logout();\n            this.router.navigate(['/login']);\n          } else {\n            alert('Error al cargar préstamos: ' + (err?.error?.message || 'Error desconocido'));\n          }\n        }\n      });\n    }\n    filtrarPrestamos() {\n      if (this.filtroEstado === 'TODOS') {\n        return this.prestamos;\n      }\n      return this.prestamos.filter(p => p.estado === this.filtroEstado);\n    }\n    calcularDiasTranscurridos(fechaPrestamo) {\n      const fecha = new Date(fechaPrestamo);\n      const hoy = new Date();\n      const diffTime = Math.abs(hoy.getTime() - fecha.getTime());\n      return Math.floor(diffTime / (1000 * 60 * 60 * 24));\n    }\n    calcularDiasRestantes(fechaLimite) {\n      const fecha = new Date(fechaLimite);\n      const hoy = new Date();\n      const diffTime = fecha.getTime() - hoy.getTime();\n      return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    }\n    estaVencido(fechaLimite) {\n      return this.calcularDiasRestantes(fechaLimite) < 0;\n    }\n    getEstadoBadgeClass(estado) {\n      switch (estado) {\n        case 'PRESTADO':\n          return 'bg-primary';\n        case 'MULTA':\n          return 'bg-danger';\n        case 'DEVUELTO':\n          return 'bg-success';\n        default:\n          return 'bg-secondary';\n      }\n    }\n    getEstadoTexto(estado) {\n      switch (estado) {\n        case 'PRESTADO':\n          return 'Prestado';\n        case 'MULTA':\n          return 'En Multa';\n        case 'DEVUELTO':\n          return 'Devuelto';\n        default:\n          return estado;\n      }\n    }\n    formatearFecha(fecha) {\n      if (!fecha) return 'N/A';\n      return new Date(fecha).toLocaleDateString('es-ES', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n      });\n    }\n    formatearMoneda(valor) {\n      if (!valor) return '$0';\n      return '$' + valor.toLocaleString('es-CO');\n    }\n    tieneDiasRetraso(prestamo) {\n      return prestamo.diasRetraso !== undefined && prestamo.diasRetraso !== null && prestamo.diasRetraso > 0;\n    }\n    tieneMulta(prestamo) {\n      return prestamo.valorMulta !== undefined && prestamo.valorMulta !== null && prestamo.valorMulta > 0;\n    }\n    getPrestadosCount() {\n      return this.prestamos.filter(p => p.estado === 'PRESTADO').length;\n    }\n    getMultasCount() {\n      return this.prestamos.filter(p => p.estado === 'MULTA').length;\n    }\n    getDevueltosCount() {\n      return this.prestamos.filter(p => p.estado === 'DEVUELTO').length;\n    }\n    getDiasRestantesClass(fechaLimite) {\n      const dias = this.calcularDiasRestantes(fechaLimite);\n      if (dias < 0) return 'bg-danger';\n      if (dias <= 2) return 'bg-warning';\n      return 'bg-success';\n    }\n    static ɵfac = function HistorialPrestamosComponent_Factory(t) {\n      return new (t || HistorialPrestamosComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.Router));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: HistorialPrestamosComponent,\n      selectors: [[\"app-historial-prestamos\"]],\n      decls: 81,\n      vars: 12,\n      consts: [[1, \"historial-container\"], [1, \"container-fluid\", \"py-4\"], [1, \"header-section\", \"mb-5\"], [1, \"page-title\", \"mb-3\"], [1, \"subtitle\"], [1, \"row\", \"g-4\", \"mb-4\"], [1, \"col-md-4\"], [1, \"stat-card\", \"stat-card-primary\"], [1, \"stat-icon\"], [1, \"stat-content\"], [1, \"stat-number\"], [1, \"stat-label\"], [1, \"stat-card\", \"stat-card-danger\"], [1, \"stat-card\", \"stat-card-success\"], [1, \"card\", \"filter-card\", \"shadow-lg\", \"mb-4\"], [1, \"card-header\", \"filter-header\"], [1, \"mb-0\"], [1, \"card-body\"], [1, \"row\", \"g-3\", \"align-items-end\"], [1, \"form-label\", \"filter-label\"], [1, \"form-select\", \"filter-select\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"TODOS\"], [\"value\", \"PRESTADO\"], [\"value\", \"MULTA\"], [\"value\", \"DEVUELTO\"], [1, \"col-md-8\"], [1, \"stats-badges\"], [1, \"stat-badge\", \"badge-total\"], [1, \"stat-badge\", \"badge-prestados\"], [1, \"stat-badge\", \"badge-multas\"], [1, \"stat-badge\", \"badge-devueltos\"], [1, \"card\", \"table-card\", \"shadow-lg\"], [1, \"card-header\", \"table-header\"], [\"class\", \"loading-container\", 4, \"ngIf\"], [\"class\", \"empty-state\", 4, \"ngIf\"], [\"class\", \"table-responsive\", 4, \"ngIf\"], [1, \"loading-container\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\", 2, \"width\", \"3rem\", \"height\", \"3rem\"], [1, \"visually-hidden\"], [1, \"mt-3\", \"text-muted\"], [1, \"empty-state\"], [1, \"empty-icon\"], [1, \"text-muted\"], [1, \"table-responsive\"], [1, \"table\", \"table-hover\", \"prestamos-table\"], [\"class\", \"prestamo-row\", 4, \"ngFor\", \"ngForOf\"], [1, \"prestamo-row\"], [1, \"libro-cell\"], [1, \"libro-info\"], [1, \"libro-titulo\"], [1, \"libro-meta\"], [1, \"libro-autor\"], [\"class\", \"badge badge-categoria\", 4, \"ngIf\"], [1, \"fecha-text\"], [1, \"fecha-limite-wrapper\"], [\"class\", \"badge badge-vencido\", 4, \"ngIf\"], [1, \"badge\", 3, \"ngClass\"], [1, \"badge\", \"estado-badge\", 3, \"ngClass\"], [\"class\", \"badge badge-retraso\", 4, \"ngIf\"], [\"class\", \"text-muted\", 4, \"ngIf\"], [\"class\", \"multa-text\", 4, \"ngIf\"], [1, \"badge\", \"badge-categoria\"], [1, \"badge\", \"badge-vencido\"], [1, \"badge\", \"badge-retraso\"], [1, \"multa-text\"]],\n      template: function HistorialPrestamosComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h1\", 3);\n          i0.ɵɵtext(4, \" \\uD83D\\uDCDA Mi Historial de Pr\\u00E9stamos \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"p\", 4);\n          i0.ɵɵtext(6, \"Consulta tus pr\\u00E9stamos, multas y fechas de entrega\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6)(9, \"div\", 7)(10, \"div\", 8);\n          i0.ɵɵtext(11, \"\\uD83D\\uDCD6\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"div\", 9)(13, \"h2\", 10);\n          i0.ɵɵtext(14);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"p\", 11);\n          i0.ɵɵtext(16, \"En Pr\\u00E9stamo\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(17, \"div\", 6)(18, \"div\", 12)(19, \"div\", 8);\n          i0.ɵɵtext(20, \"\\u26A0\\uFE0F\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"div\", 9)(22, \"h2\", 10);\n          i0.ɵɵtext(23);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"p\", 11);\n          i0.ɵɵtext(25, \"Con Multa\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(26, \"div\", 6)(27, \"div\", 13)(28, \"div\", 8);\n          i0.ɵɵtext(29, \"\\u2705\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"div\", 9)(31, \"h2\", 10);\n          i0.ɵɵtext(32);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(33, \"p\", 11);\n          i0.ɵɵtext(34, \"Devueltos\");\n          i0.ɵɵelementEnd()()()()();\n          i0.ɵɵelementStart(35, \"div\", 14)(36, \"div\", 15)(37, \"h5\", 16);\n          i0.ɵɵtext(38, \" \\uD83D\\uDD0D Buscar y Filtrar \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(39, \"div\", 17)(40, \"div\", 18)(41, \"div\", 6)(42, \"label\", 19)(43, \"strong\");\n          i0.ɵɵtext(44, \"Filtrar por Estado:\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(45, \"select\", 20);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function HistorialPrestamosComponent_Template_select_ngModelChange_45_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.filtroEstado, $event) || (ctx.filtroEstado = $event);\n            return $event;\n          });\n          i0.ɵɵelementStart(46, \"option\", 21);\n          i0.ɵɵtext(47, \"Todos los pr\\u00E9stamos\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(48, \"option\", 22);\n          i0.ɵɵtext(49, \"En Pr\\u00E9stamo\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(50, \"option\", 23);\n          i0.ɵɵtext(51, \"Con Multa\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(52, \"option\", 24);\n          i0.ɵɵtext(53, \"Devueltos\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(54, \"div\", 25)(55, \"div\", 26)(56, \"span\", 27)(57, \"strong\");\n          i0.ɵɵtext(58, \"Total:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(59);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(60, \"span\", 28)(61, \"strong\");\n          i0.ɵɵtext(62, \"Prestados:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(63);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(64, \"span\", 29)(65, \"strong\");\n          i0.ɵɵtext(66, \"En Multa:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(67);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(68, \"span\", 30)(69, \"strong\");\n          i0.ɵɵtext(70, \"Devueltos:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(71);\n          i0.ɵɵelementEnd()()()()()();\n          i0.ɵɵelementStart(72, \"div\", 31)(73, \"div\", 32)(74, \"h5\", 16);\n          i0.ɵɵtext(75, \" \\uD83D\\uDCD6 Mis Pr\\u00E9stamos \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(76, \"div\", 17);\n          i0.ɵɵtemplate(77, HistorialPrestamosComponent_div_77_Template, 6, 0, \"div\", 33)(78, HistorialPrestamosComponent_div_78_Template, 7, 0, \"div\", 34)(79, HistorialPrestamosComponent_div_79_Template, 7, 0, \"div\", 34)(80, HistorialPrestamosComponent_div_80_Template, 20, 1, \"div\", 35);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(14);\n          i0.ɵɵtextInterpolate(ctx.getPrestadosCount());\n          i0.ɵɵadvance(9);\n          i0.ɵɵtextInterpolate(ctx.getMultasCount());\n          i0.ɵɵadvance(9);\n          i0.ɵɵtextInterpolate(ctx.getDevueltosCount());\n          i0.ɵɵadvance(13);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.filtroEstado);\n          i0.ɵɵadvance(14);\n          i0.ɵɵtextInterpolate1(\" \", ctx.prestamos.length, \" \");\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\" \", ctx.getPrestadosCount(), \" \");\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\" \", ctx.getMultasCount(), \" \");\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\" \", ctx.getDevueltosCount(), \" \");\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.prestamos.length === 0);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.prestamos.length > 0 && ctx.filtrarPrestamos().length === 0);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.filtrarPrestamos().length > 0);\n        }\n      },\n      dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgModel],\n      styles: [\".historial-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:30px 15px}.historial-container[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:30px;box-shadow:0 10px 30px #0003;margin:0 auto;max-width:1400px}.header-section[_ngcontent-%COMP%]{text-align:center}.page-title[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:2.5rem;text-shadow:2px 2px 4px rgba(0,0,0,.3);letter-spacing:.03em;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{color:#ffffffe6;font-size:1.1rem;text-shadow:1px 1px 2px rgba(0,0,0,.2)}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:25px;display:flex;align-items:center;gap:20px;box-shadow:0 5px 15px #0000001a;transition:all .3s ease;border-left:5px solid}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 25px #00000026}.stat-card-primary[_ngcontent-%COMP%]{border-left-color:#667eea}.stat-card-danger[_ngcontent-%COMP%]{border-left-color:#dc3545}.stat-card-success[_ngcontent-%COMP%]{border-left-color:#28a745}.stat-icon[_ngcontent-%COMP%]{font-size:3rem;line-height:1}.stat-content[_ngcontent-%COMP%]{flex:1}.stat-number[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin:0;line-height:1}.stat-card-primary[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{color:#667eea}.stat-card-danger[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{color:#dc3545}.stat-card-success[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{color:#28a745}.stat-label[_ngcontent-%COMP%]{color:#6c757d;margin:.5rem 0 0;font-weight:500;font-size:.95rem}.filter-card[_ngcontent-%COMP%]{border-radius:15px;border:none;overflow:hidden}.filter-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:1.25rem;font-weight:600}.filter-label[_ngcontent-%COMP%]{color:#495057;font-size:.95rem;margin-bottom:.5rem}.filter-select[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #e9ecef;transition:all .3s ease;padding:.6rem 1rem}.filter-select[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.stats-badges[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap;align-items:center}.stat-badge[_ngcontent-%COMP%]{padding:.6rem 1rem;border-radius:20px;font-size:.9rem;font-weight:500;white-space:nowrap}.badge-total[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.badge-prestados[_ngcontent-%COMP%]{background:#667eea;color:#fff}.badge-multas[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.badge-devueltos[_ngcontent-%COMP%]{background:#28a745;color:#fff}.table-card[_ngcontent-%COMP%]{border-radius:15px;border:none;overflow:hidden}.table-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:1.25rem;font-weight:600}.prestamos-table[_ngcontent-%COMP%]{margin:0;background:#fff}.prestamos-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:linear-gradient(135deg,#495057,#343a40);color:#fff;border:none;font-weight:600;padding:1rem;text-align:left;font-size:.95rem;letter-spacing:.5px}.prestamos-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;vertical-align:middle;border-bottom:1px solid #e9ecef}.prestamo-row[_ngcontent-%COMP%]{transition:all .3s ease}.prestamo-row[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;transform:scale(1.01);box-shadow:0 2px 8px #0000001a}.libro-cell[_ngcontent-%COMP%]{min-width:250px}.libro-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.libro-titulo[_ngcontent-%COMP%]{color:#333;font-size:1rem;line-height:1.3;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.libro-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}.libro-autor[_ngcontent-%COMP%]{color:#6c757d;font-size:.85rem}.badge-categoria[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:.25rem .6rem;border-radius:12px;font-size:.75rem;font-weight:500}.fecha-text[_ngcontent-%COMP%]{color:#495057;font-weight:500;font-size:.9rem}.fecha-limite-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.badge-vencido[_ngcontent-%COMP%]{background:#dc3545;color:#fff;padding:.3rem .6rem;border-radius:12px;font-size:.75rem;font-weight:600;align-self:flex-start}.badge[_ngcontent-%COMP%]{padding:.5rem .8rem;border-radius:20px;font-weight:600;font-size:.85rem;display:inline-block}.badge.bg-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997)!important;color:#fff}.badge.bg-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc107,#fd7e14)!important;color:#212529}.badge.bg-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333)!important;color:#fff}.estado-badge[_ngcontent-%COMP%]{padding:.5rem .8rem;border-radius:20px;font-weight:600;font-size:.85rem}.estado-badge.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)!important;color:#fff}.estado-badge.bg-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333)!important;color:#fff}.estado-badge.bg-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997)!important;color:#fff}.badge-retraso[_ngcontent-%COMP%]{background:#dc3545;color:#fff;padding:.4rem .7rem;border-radius:15px;font-weight:600}.multa-text[_ngcontent-%COMP%]{color:#dc3545;font-weight:700;font-size:1rem}.loading-container[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;opacity:.5}.empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#495057;margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:1rem}@media (max-width: 768px){.page-title[_ngcontent-%COMP%]{font-size:2rem}.stat-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.stat-icon[_ngcontent-%COMP%]{font-size:2.5rem}.stat-number[_ngcontent-%COMP%]{font-size:2rem}.prestamos-table[_ngcontent-%COMP%]{font-size:.85rem}.prestamos-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .prestamos-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem}.libro-cell[_ngcontent-%COMP%]{min-width:200px}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.prestamo-row[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease}.stat-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease}\"]\n    });\n  }\n  return HistorialPrestamosComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
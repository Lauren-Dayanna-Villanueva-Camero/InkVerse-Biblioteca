{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"../../services/admin.service\";\nimport * as i3 from \"../../services/alert.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/common\";\nconst _c0 = [\"librosTable\"];\nfunction AdminLibrosComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 45)(1, \"div\", 46)(2, \"span\", 47);\n    i0.ÉµÉµtext(3, \"Cargando...\");\n    i0.ÉµÉµelementEnd()()();\n  }\n}\nfunction AdminLibrosComponent_div_17_tr_22_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"span\", 59);\n    i0.ÉµÉµtext(1);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const libro_r2 = i0.ÉµÉµnextContext().$implicit;\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµtextInterpolate1(\" \", libro_r2.categoria.nombre, \" \");\n  }\n}\nfunction AdminLibrosComponent_div_17_tr_22_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"span\", 5);\n    i0.ÉµÉµtext(1, \"Sin categor\\u00EDa\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction AdminLibrosComponent_div_17_tr_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"tr\")(1, \"td\");\n    i0.ÉµÉµtext(2);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"td\")(4, \"strong\");\n    i0.ÉµÉµtext(5);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(6, \"td\");\n    i0.ÉµÉµtext(7);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(8, \"td\");\n    i0.ÉµÉµtemplate(9, AdminLibrosComponent_div_17_tr_22_span_9_Template, 2, 1, \"span\", 52)(10, AdminLibrosComponent_div_17_tr_22_span_10_Template, 2, 0, \"span\", 53);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(11, \"td\");\n    i0.ÉµÉµtext(12);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(13, \"td\")(14, \"span\", 54);\n    i0.ÉµÉµtext(15);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(16, \"td\")(17, \"img\", 55);\n    i0.ÉµÉµlistener(\"error\", function AdminLibrosComponent_div_17_tr_22_Template_img_error_17_listener($event) {\n      i0.ÉµÉµrestoreView(_r1);\n      const ctx_r2 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r2.onImageError($event));\n    });\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(18, \"td\")(19, \"button\", 56);\n    i0.ÉµÉµlistener(\"click\", function AdminLibrosComponent_div_17_tr_22_Template_button_click_19_listener() {\n      const libro_r2 = i0.ÉµÉµrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r2.verLibro(libro_r2));\n    });\n    i0.ÉµÉµtext(20, \" \\uD83D\\uDC41\\uFE0F \");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(21, \"button\", 57);\n    i0.ÉµÉµlistener(\"click\", function AdminLibrosComponent_div_17_tr_22_Template_button_click_21_listener() {\n      const libro_r2 = i0.ÉµÉµrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r2.abrirEditarLibro(libro_r2));\n    });\n    i0.ÉµÉµtext(22, \" \\u270F\\uFE0F \");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(23, \"button\", 58);\n    i0.ÉµÉµlistener(\"click\", function AdminLibrosComponent_div_17_tr_22_Template_button_click_23_listener() {\n      const libro_r2 = i0.ÉµÉµrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r2.eliminarLibro(libro_r2));\n    });\n    i0.ÉµÉµtext(24, \" \\uD83D\\uDDD1\\uFE0F \");\n    i0.ÉµÉµelementEnd()()();\n  }\n  if (rf & 2) {\n    const libro_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(libro_r2.id);\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate(libro_r2.titulo);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(libro_r2.autor);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"ngIf\", libro_r2.categoria);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", !libro_r2.categoria);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(libro_r2.cantidadTotal);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"ngClass\", libro_r2.cantidadDisponible > 0 ? \"bg-success\" : \"bg-danger\");\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµtextInterpolate1(\" \", libro_r2.cantidadDisponible, \" \");\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµpropertyInterpolate(\"alt\", libro_r2.titulo);\n    i0.ÉµÉµproperty(\"src\", ctx_r2.getImagenUrl(libro_r2.imagenUrl), i0.ÉµÉµsanitizeUrl);\n  }\n}\nfunction AdminLibrosComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 48)(1, \"table\", 49, 0)(3, \"thead\", 50)(4, \"tr\")(5, \"th\");\n    i0.ÉµÉµtext(6, \"ID\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(7, \"th\");\n    i0.ÉµÉµtext(8, \"T\\u00EDtulo\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(9, \"th\");\n    i0.ÉµÉµtext(10, \"Autor\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(11, \"th\");\n    i0.ÉµÉµtext(12, \"Categor\\u00EDa\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(13, \"th\");\n    i0.ÉµÉµtext(14, \"Total\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(15, \"th\");\n    i0.ÉµÉµtext(16, \"Disponibles\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(17, \"th\");\n    i0.ÉµÉµtext(18, \"Imagen\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(19, \"th\");\n    i0.ÉµÉµtext(20, \"Acciones\");\n    i0.ÉµÉµelementEnd()()();\n    i0.ÉµÉµelementStart(21, \"tbody\");\n    i0.ÉµÉµtemplate(22, AdminLibrosComponent_div_17_tr_22_Template, 25, 10, \"tr\", 51);\n    i0.ÉµÉµelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(22);\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r2.libros);\n  }\n}\nfunction AdminLibrosComponent_div_59_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"span\");\n    i0.ÉµÉµtext(1, \"\\uD83D\\uDCE4 Subir Imagen\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction AdminLibrosComponent_div_59_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"span\");\n    i0.ÉµÉµelement(1, \"span\", 63);\n    i0.ÉµÉµtext(2, \" Subiendo... \");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction AdminLibrosComponent_div_59_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"div\", 60)(1, \"button\", 61);\n    i0.ÉµÉµlistener(\"click\", function AdminLibrosComponent_div_59_Template_button_click_1_listener() {\n      i0.ÉµÉµrestoreView(_r4);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r2.subirImagen());\n    });\n    i0.ÉµÉµtemplate(2, AdminLibrosComponent_div_59_span_2_Template, 2, 0, \"span\", 62)(3, AdminLibrosComponent_div_59_span_3_Template, 3, 0, \"span\", 62);\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"disabled\", ctx_r2.subiendoImagen);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", !ctx_r2.subiendoImagen);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r2.subiendoImagen);\n  }\n}\nfunction AdminLibrosComponent_div_60_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"div\", 64)(1, \"label\", 23);\n    i0.ÉµÉµtext(2, \"Vista Previa:\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"div\", 65);\n    i0.ÉµÉµelement(4, \"img\", 66);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(5, \"button\", 67);\n    i0.ÉµÉµlistener(\"click\", function AdminLibrosComponent_div_60_Template_button_click_5_listener() {\n      i0.ÉµÉµrestoreView(_r5);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      ctx_r2.imagenSeleccionada = null;\n      ctx_r2.imagenPreview = null;\n      return i0.ÉµÉµresetView(ctx_r2.libroForm.patchValue({\n        imagenUrl: \"\"\n      }));\n    });\n    i0.ÉµÉµtext(6, \" \\uD83D\\uDDD1\\uFE0F Eliminar Imagen \");\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµproperty(\"src\", ctx_r2.imagenPreview, i0.ÉµÉµsanitizeUrl);\n  }\n}\nfunction AdminLibrosComponent_option_67_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"option\", 34);\n    i0.ÉµÉµtext(1);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const cat_r6 = ctx.$implicit;\n    i0.ÉµÉµproperty(\"value\", cat_r6.id);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµtextInterpolate1(\" \", cat_r6.nombre, \" \");\n  }\n}\nfunction AdminLibrosComponent_div_97_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"span\", 59);\n    i0.ÉµÉµtext(1);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµtextInterpolate1(\" \", ctx_r2.libroParaVer.categoria.nombre, \" \");\n  }\n}\nfunction AdminLibrosComponent_div_97_span_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"span\", 5);\n    i0.ÉµÉµtext(1, \"Sin categor\\u00EDa\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction AdminLibrosComponent_div_97_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 28)(1, \"strong\");\n    i0.ÉµÉµtext(2, \"ID del Libro:\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"p\", 71);\n    i0.ÉµÉµtext(4);\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµtextInterpolate1(\"#\", ctx_r2.libroParaVer.id, \"\");\n  }\n}\nfunction AdminLibrosComponent_div_97_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"div\", 19)(1, \"div\", 21)(2, \"div\", 68)(3, \"img\", 69);\n    i0.ÉµÉµlistener(\"error\", function AdminLibrosComponent_div_97_Template_img_error_3_listener($event) {\n      i0.ÉµÉµrestoreView(_r7);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r2.onImageError($event));\n    });\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(4, \"div\", 70)(5, \"h3\", 28);\n    i0.ÉµÉµtext(6);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(7, \"div\", 28)(8, \"strong\");\n    i0.ÉµÉµtext(9, \"Autor:\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(10, \"p\", 9);\n    i0.ÉµÉµtext(11);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(12, \"div\", 28)(13, \"strong\");\n    i0.ÉµÉµtext(14, \"Categor\\u00EDa:\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(15, \"p\", 9);\n    i0.ÉµÉµtemplate(16, AdminLibrosComponent_div_97_span_16_Template, 2, 1, \"span\", 52)(17, AdminLibrosComponent_div_97_span_17_Template, 2, 0, \"span\", 53);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(18, \"div\", 28)(19, \"strong\");\n    i0.ÉµÉµtext(20, \"Descripci\\u00F3n:\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(21, \"p\", 71);\n    i0.ÉµÉµtext(22);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(23, \"div\", 72)(24, \"div\", 73)(25, \"strong\");\n    i0.ÉµÉµtext(26, \"Cantidad Total:\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(27, \"p\", 9)(28, \"span\", 74);\n    i0.ÉµÉµtext(29);\n    i0.ÉµÉµelementEnd()()();\n    i0.ÉµÉµelementStart(30, \"div\", 73)(31, \"strong\");\n    i0.ÉµÉµtext(32, \"Cantidad Disponible:\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(33, \"p\", 9)(34, \"span\", 54);\n    i0.ÉµÉµtext(35);\n    i0.ÉµÉµelementEnd()()()();\n    i0.ÉµÉµtemplate(36, AdminLibrosComponent_div_97_div_36_Template, 5, 1, \"div\", 75);\n    i0.ÉµÉµelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµproperty(\"src\", ctx_r2.getImagenUrl(ctx_r2.libroParaVer.imagenUrl), i0.ÉµÉµsanitizeUrl)(\"alt\", ctx_r2.libroParaVer.titulo);\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate(ctx_r2.libroParaVer.titulo);\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµtextInterpolate(ctx_r2.libroParaVer.autor);\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r2.libroParaVer.categoria);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", !ctx_r2.libroParaVer.categoria);\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµtextInterpolate(ctx_r2.libroParaVer.descripcion);\n    i0.ÉµÉµadvance(7);\n    i0.ÉµÉµtextInterpolate(ctx_r2.libroParaVer.cantidadTotal);\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµproperty(\"ngClass\", ctx_r2.libroParaVer.cantidadDisponible > 0 ? \"bg-success\" : \"bg-danger\");\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµtextInterpolate1(\" \", ctx_r2.libroParaVer.cantidadDisponible, \" \");\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r2.libroParaVer.id);\n  }\n}\nfunction AdminLibrosComponent_button_101_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"button\", 76);\n    i0.ÉµÉµlistener(\"click\", function AdminLibrosComponent_button_101_Template_button_click_0_listener() {\n      i0.ÉµÉµrestoreView(_r8);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r2.editarDesdeModalVer());\n    });\n    i0.ÉµÉµtext(1, \" \\u270F\\uFE0F Editar Libro \");\n    i0.ÉµÉµelementEnd();\n  }\n}\nexport let AdminLibrosComponent = /*#__PURE__*/(() => {\n  class AdminLibrosComponent {\n    authService;\n    adminService;\n    alertService;\n    router;\n    fb;\n    librosTable;\n    libros = [];\n    categorias = [];\n    loading = false;\n    mostrarFormularioLibro = false;\n    modoEdicion = false;\n    libroSeleccionado = null;\n    libroParaVer = null;\n    libroForm;\n    imagenSeleccionada = null;\n    imagenPreview = null;\n    subiendoImagen = false;\n    constructor(authService, adminService, alertService, router, fb) {\n      this.authService = authService;\n      this.adminService = adminService;\n      this.alertService = alertService;\n      this.router = router;\n      this.fb = fb;\n      this.libroForm = this.fb.group({\n        titulo: ['', Validators.required],\n        autor: ['', Validators.required],\n        descripcion: ['', Validators.required],\n        imagenUrl: [''],\n        cantidadTotal: [1, [Validators.required, Validators.min(1)]],\n        cantidadDisponible: [1, [Validators.required, Validators.min(0)]],\n        categoriaId: [null]\n      });\n    }\n    ngOnInit() {\n      if (!this.authService.isAdmin()) {\n        this.router.navigate(['/']);\n        return;\n      }\n      this.cargarCategorias();\n      this.cargarLibros();\n    }\n    ngAfterViewInit() {\n      // DataTable se inicializarÃ¡ despuÃ©s de cargar los datos\n    }\n    cargarCategorias() {\n      this.adminService.listarCategorias().subscribe({\n        next: categorias => {\n          this.categorias = categorias;\n        },\n        error: err => {\n          console.error('Error al cargar categorÃ­as:', err);\n        }\n      });\n    }\n    cargarLibros() {\n      this.loading = true;\n      this.adminService.listarLibros().subscribe({\n        next: libros => {\n          this.libros = libros;\n          this.loading = false;\n          setTimeout(() => this.inicializarDataTable(), 100);\n        },\n        error: err => {\n          console.error('Error al cargar libros:', err);\n          this.loading = false;\n        }\n      });\n    }\n    inicializarDataTable() {\n      if ($.fn.DataTable.isDataTable(this.librosTable.nativeElement)) {\n        $(this.librosTable.nativeElement).DataTable().destroy();\n      }\n      $(this.librosTable.nativeElement).DataTable({\n        language: {\n          url: '//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json'\n        },\n        pageLength: 10,\n        order: [[0, 'asc']],\n        columnDefs: [{\n          orderable: false,\n          targets: [6, 7]\n        } // Botones de acciÃ³n no ordenables\n        ]\n      });\n    }\n    abrirCrearLibro() {\n      this.modoEdicion = false;\n      this.libroSeleccionado = null;\n      this.imagenSeleccionada = null;\n      this.imagenPreview = null;\n      this.libroForm.reset({\n        cantidadTotal: 1,\n        cantidadDisponible: 1,\n        imagenUrl: ''\n      });\n      this.mostrarFormularioLibro = true;\n      const modal = new bootstrap.Modal(document.getElementById('libroModal'));\n      modal.show();\n    }\n    abrirEditarLibro(libro) {\n      this.modoEdicion = true;\n      this.libroSeleccionado = libro;\n      this.imagenSeleccionada = null;\n      this.imagenPreview = libro.imagenUrl ? `http://localhost:8080${libro.imagenUrl}` : null;\n      this.libroForm.patchValue({\n        titulo: libro.titulo,\n        autor: libro.autor,\n        descripcion: libro.descripcion,\n        imagenUrl: libro.imagenUrl || '',\n        cantidadTotal: libro.cantidadTotal,\n        cantidadDisponible: libro.cantidadDisponible,\n        categoriaId: libro.categoria?.id || null\n      });\n      this.mostrarFormularioLibro = true;\n      const modal = new bootstrap.Modal(document.getElementById('libroModal'));\n      modal.show();\n    }\n    onFileSelected(event) {\n      const file = event.target.files[0];\n      if (file) {\n        // Validar que sea una imagen\n        if (!file.type.startsWith('image/')) {\n          this.alertService.warning('Archivo invÃ¡lido', 'Por favor selecciona un archivo de imagen');\n          return;\n        }\n        // Validar tamaÃ±o (5MB)\n        if (file.size > 5 * 1024 * 1024) {\n          this.alertService.warning('Archivo muy grande', 'La imagen no puede ser mayor a 5MB');\n          return;\n        }\n        this.imagenSeleccionada = file;\n        // Crear preview\n        const reader = new FileReader();\n        reader.onload = e => {\n          this.imagenPreview = e.target.result;\n        };\n        reader.readAsDataURL(file);\n      }\n    }\n    subirImagen() {\n      if (!this.imagenSeleccionada) {\n        return;\n      }\n      this.subiendoImagen = true;\n      this.adminService.subirImagen(this.imagenSeleccionada).subscribe({\n        next: response => {\n          this.libroForm.patchValue({\n            imagenUrl: response.url\n          });\n          this.imagenPreview = `http://localhost:8080${response.url}`;\n          this.subiendoImagen = false;\n          this.alertService.success('Imagen subida', 'La imagen se ha subido exitosamente');\n        },\n        error: err => {\n          this.subiendoImagen = false;\n          this.alertService.error('Error al subir imagen', err?.error?.error || 'Error al subir la imagen');\n        }\n      });\n    }\n    guardarLibro() {\n      if (this.libroForm.invalid) {\n        this.libroForm.markAllAsTouched();\n        return;\n      }\n      // Si hay una imagen seleccionada pero no se ha subido, subirla primero\n      if (this.imagenSeleccionada) {\n        const formValue = this.libroForm.value;\n        if (!formValue.imagenUrl || formValue.imagenUrl === '') {\n          // Subir imagen primero\n          this.subiendoImagen = true;\n          this.adminService.subirImagen(this.imagenSeleccionada).subscribe({\n            next: response => {\n              this.libroForm.patchValue({\n                imagenUrl: response.url\n              });\n              this.subiendoImagen = false;\n              // Continuar guardando el libro\n              this.guardarLibroFinal();\n            },\n            error: err => {\n              this.subiendoImagen = false;\n              this.alertService.error('Error al subir imagen', err?.error?.error || 'Error al subir la imagen');\n            }\n          });\n          return;\n        }\n      }\n      this.guardarLibroFinal();\n    }\n    guardarLibroFinal() {\n      const formValue = this.libroForm.value;\n      // Buscar la categorÃ­a si se proporciona un ID\n      let categoria = null;\n      if (formValue.categoriaId && formValue.categoriaId !== 'null' && formValue.categoriaId !== null) {\n        const categoriaId = typeof formValue.categoriaId === 'string' ? parseInt(formValue.categoriaId) : formValue.categoriaId;\n        categoria = this.categorias.find(c => c.id === categoriaId) || null;\n      }\n      const libro = {\n        id: this.libroSeleccionado?.id || 0,\n        titulo: formValue.titulo,\n        autor: formValue.autor,\n        descripcion: formValue.descripcion,\n        imagenUrl: formValue.imagenUrl || '',\n        cantidadTotal: formValue.cantidadTotal,\n        cantidadDisponible: formValue.cantidadDisponible,\n        categoria: categoria || undefined\n      };\n      console.log('ðŸ“¤ Enviando libro:', {\n        ...libro,\n        categoria: categoria ? {\n          id: categoria.id,\n          nombre: categoria.nombre\n        } : null\n      });\n      const operacion = this.modoEdicion ? this.adminService.actualizarLibro(libro.id, libro) : this.adminService.crearLibro(libro);\n      operacion.subscribe({\n        next: () => {\n          this.cerrarModal();\n          this.cargarLibros();\n          this.alertService.success(this.modoEdicion ? 'Libro actualizado' : 'Libro creado', this.modoEdicion ? 'El libro ha sido actualizado exitosamente' : 'El libro ha sido creado exitosamente');\n        },\n        error: err => {\n          this.alertService.error('Error al guardar', err?.error?.message || 'Error al guardar el libro');\n        }\n      });\n    }\n    eliminarLibro(libro) {\n      this.alertService.confirm('Eliminar libro', `Â¿EstÃ¡s seguro de eliminar el libro \"${libro.titulo}\"?`, 'SÃ­, eliminar', 'Cancelar').then(confirmed => {\n        if (confirmed) {\n          this.adminService.eliminarLibro(libro.id).subscribe({\n            next: () => {\n              this.cargarLibros();\n              this.alertService.success('Libro eliminado', 'El libro ha sido eliminado exitosamente');\n            },\n            error: err => {\n              this.alertService.error('Error al eliminar', err?.error?.message || 'Error al eliminar el libro');\n            }\n          });\n        }\n      });\n    }\n    cerrarModal() {\n      const modal = bootstrap.Modal.getInstance(document.getElementById('libroModal'));\n      if (modal) {\n        modal.hide();\n      }\n      this.mostrarFormularioLibro = false;\n      this.imagenSeleccionada = null;\n      this.imagenPreview = null;\n      this.libroForm.reset();\n    }\n    getImagenUrl(imagenUrl) {\n      if (!imagenUrl) {\n        return 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAiIHk9IjUwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5MaWJybzwvdGV4dD48L3N2Zz4=';\n      }\n      // Si es una URL completa, devolverla tal cual\n      if (imagenUrl.startsWith('http://') || imagenUrl.startsWith('https://')) {\n        return imagenUrl;\n      }\n      // Si es una ruta relativa (como /uploads/...), construir la URL completa\n      if (imagenUrl.startsWith('/')) {\n        // Evitar duplicar el puerto\n        if (imagenUrl.includes('localhost:8080')) {\n          return imagenUrl;\n        }\n        return `http://localhost:8080${imagenUrl}`;\n      }\n      return imagenUrl;\n    }\n    onImageError(event) {\n      // Usar una imagen SVG inline para evitar loops infinitos\n      event.target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAiIHk9IjUwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5MaWJybzwvdGV4dD48L3N2Zz4=';\n      event.target.onerror = null; // Prevenir loops infinitos\n    }\n    verLibro(libro) {\n      this.libroParaVer = libro;\n      const modal = new bootstrap.Modal(document.getElementById('verLibroModal'));\n      modal.show();\n    }\n    cerrarModalVer() {\n      const modal = bootstrap.Modal.getInstance(document.getElementById('verLibroModal'));\n      if (modal) {\n        modal.hide();\n      }\n      this.libroParaVer = null;\n    }\n    editarDesdeModalVer() {\n      if (!this.libroParaVer) {\n        return;\n      }\n      // Cerrar el modal de ver primero\n      const modalVer = bootstrap.Modal.getInstance(document.getElementById('verLibroModal'));\n      if (modalVer) {\n        modalVer.hide();\n      }\n      // Esperar a que el modal se cierre completamente antes de abrir el de editar\n      setTimeout(() => {\n        this.abrirEditarLibro(this.libroParaVer);\n        this.libroParaVer = null;\n      }, 300);\n    }\n    static Éµfac = function AdminLibrosComponent_Factory(t) {\n      return new (t || AdminLibrosComponent)(i0.ÉµÉµdirectiveInject(i1.AuthService), i0.ÉµÉµdirectiveInject(i2.AdminService), i0.ÉµÉµdirectiveInject(i3.AlertService), i0.ÉµÉµdirectiveInject(i4.Router), i0.ÉµÉµdirectiveInject(i5.FormBuilder));\n    };\n    static Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n      type: AdminLibrosComponent,\n      selectors: [[\"app-admin-libros\"]],\n      viewQuery: function AdminLibrosComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ÉµÉµviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ÉµÉµqueryRefresh(_t = i0.ÉµÉµloadQuery()) && (ctx.librosTable = _t.first);\n        }\n      },\n      decls: 102,\n      vars: 22,\n      consts: [[\"librosTable\", \"\"], [1, \"admin-container\"], [1, \"container-fluid\", \"py-4\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-4\"], [1, \"page-title\", \"mb-2\"], [1, \"text-muted\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"card\", \"shadow-sm\"], [1, \"card-header\", \"bg-primary\", \"text-white\"], [1, \"mb-0\"], [1, \"card-body\"], [\"class\", \"text-center py-5\", 4, \"ngIf\"], [\"class\", \"table-responsive\", 4, \"ngIf\"], [\"id\", \"libroModal\", \"tabindex\", \"-1\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\", \"modal-lg\", \"modal-dialog-centered\"], [1, \"modal-content\"], [1, \"modal-header\", \"bg-primary\", \"text-white\"], [1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn-close\", \"btn-close-white\", 3, \"click\"], [1, \"modal-body\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"row\"], [1, \"col-md-6\", \"mb-3\"], [1, \"form-label\"], [1, \"text-danger\"], [\"type\", \"text\", \"formControlName\", \"titulo\", 1, \"form-control\"], [1, \"invalid-feedback\"], [\"type\", \"text\", \"formControlName\", \"autor\", 1, \"form-control\"], [1, \"mb-3\"], [\"rows\", \"3\", \"formControlName\", \"descripcion\", 1, \"form-control\"], [\"type\", \"file\", \"accept\", \"image/*\", 1, \"form-control\", 3, \"change\"], [\"class\", \"mt-2\", 4, \"ngIf\"], [\"class\", \"mt-3\", 4, \"ngIf\"], [\"formControlName\", \"categoriaId\", 1, \"form-select\"], [3, \"value\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"number\", \"formControlName\", \"cantidadTotal\", \"min\", \"1\", 1, \"form-control\"], [\"type\", \"number\", \"formControlName\", \"cantidadDisponible\", \"min\", \"0\", 1, \"form-control\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"id\", \"verLibroModal\", \"tabindex\", \"-1\", 1, \"modal\", \"fade\"], [1, \"modal-header\", \"bg-info\", \"text-white\"], [\"class\", \"modal-body\", 4, \"ngIf\"], [\"type\", \"button\", \"class\", \"btn btn-primary\", 3, \"click\", 4, \"ngIf\"], [1, \"text-center\", \"py-5\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"visually-hidden\"], [1, \"table-responsive\"], [\"id\", \"librosTable\", 1, \"table\", \"table-striped\", \"table-hover\"], [1, \"table-dark\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"badge bg-secondary\", 4, \"ngIf\"], [\"class\", \"text-muted\", 4, \"ngIf\"], [1, \"badge\", 3, \"ngClass\"], [1, \"img-thumbnail\", 2, \"width\", \"50px\", \"height\", \"50px\", \"object-fit\", \"cover\", 3, \"error\", \"src\", \"alt\"], [\"title\", \"Ver detalles\", 1, \"btn\", \"btn-sm\", \"btn-info\", \"me-1\", 3, \"click\"], [\"title\", \"Editar\", 1, \"btn\", \"btn-sm\", \"btn-warning\", \"me-1\", 3, \"click\"], [\"title\", \"Eliminar\", 1, \"btn\", \"btn-sm\", \"btn-danger\", 3, \"click\"], [1, \"badge\", \"bg-secondary\"], [1, \"mt-2\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-primary\", 3, \"click\", \"disabled\"], [4, \"ngIf\"], [1, \"spinner-border\", \"spinner-border-sm\", \"me-2\"], [1, \"mt-3\"], [1, \"text-center\"], [\"alt\", \"Preview\", 1, \"img-thumbnail\", 2, \"max-width\", \"300px\", \"max-height\", \"300px\", \"object-fit\", \"contain\", 3, \"src\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-outline-danger\", \"mt-2\", 3, \"click\"], [1, \"col-md-4\", \"text-center\", \"mb-3\"], [1, \"img-fluid\", \"rounded\", \"shadow\", 2, \"max-width\", \"100%\", \"max-height\", \"400px\", \"object-fit\", \"contain\", 3, \"error\", \"src\", \"alt\"], [1, \"col-md-8\"], [1, \"mb-0\", \"text-muted\"], [1, \"row\", \"mb-3\"], [1, \"col-md-6\"], [1, \"badge\", \"bg-primary\"], [\"class\", \"mb-3\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"]],\n      template: function AdminLibrosComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ÉµÉµelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"div\", 3)(3, \"div\")(4, \"h1\", 4);\n          i0.ÉµÉµtext(5, \" \\uD83D\\uDCDA Gesti\\u00F3n de Libros \");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(6, \"p\", 5);\n          i0.ÉµÉµtext(7, \"Administra el inventario de libros\");\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelementStart(8, \"div\")(9, \"button\", 6);\n          i0.ÉµÉµlistener(\"click\", function AdminLibrosComponent_Template_button_click_9_listener() {\n            return ctx.abrirCrearLibro();\n          });\n          i0.ÉµÉµtext(10, \" \\u2795 Nuevo Libro \");\n          i0.ÉµÉµelementEnd()()();\n          i0.ÉµÉµelementStart(11, \"div\", 7)(12, \"div\", 8)(13, \"h5\", 9);\n          i0.ÉµÉµtext(14, \" \\uD83D\\uDCDA Lista de Libros \");\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelementStart(15, \"div\", 10);\n          i0.ÉµÉµtemplate(16, AdminLibrosComponent_div_16_Template, 4, 0, \"div\", 11)(17, AdminLibrosComponent_div_17_Template, 23, 1, \"div\", 12);\n          i0.ÉµÉµelementEnd()()()();\n          i0.ÉµÉµelementStart(18, \"div\", 13)(19, \"div\", 14)(20, \"div\", 15)(21, \"div\", 16)(22, \"h5\", 17);\n          i0.ÉµÉµtext(23);\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(24, \"button\", 18);\n          i0.ÉµÉµlistener(\"click\", function AdminLibrosComponent_Template_button_click_24_listener() {\n            return ctx.cerrarModal();\n          });\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelementStart(25, \"div\", 19)(26, \"form\", 20);\n          i0.ÉµÉµlistener(\"ngSubmit\", function AdminLibrosComponent_Template_form_ngSubmit_26_listener() {\n            return ctx.guardarLibro();\n          });\n          i0.ÉµÉµelementStart(27, \"div\", 21)(28, \"div\", 22)(29, \"label\", 23);\n          i0.ÉµÉµtext(30, \"T\\u00EDtulo \");\n          i0.ÉµÉµelementStart(31, \"span\", 24);\n          i0.ÉµÉµtext(32, \"*\");\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelement(33, \"input\", 25);\n          i0.ÉµÉµelementStart(34, \"div\", 26);\n          i0.ÉµÉµtext(35, \"El t\\u00EDtulo es requerido\");\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelementStart(36, \"div\", 22)(37, \"label\", 23);\n          i0.ÉµÉµtext(38, \"Autor \");\n          i0.ÉµÉµelementStart(39, \"span\", 24);\n          i0.ÉµÉµtext(40, \"*\");\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelement(41, \"input\", 27);\n          i0.ÉµÉµelementStart(42, \"div\", 26);\n          i0.ÉµÉµtext(43, \"El autor es requerido\");\n          i0.ÉµÉµelementEnd()()();\n          i0.ÉµÉµelementStart(44, \"div\", 28)(45, \"label\", 23);\n          i0.ÉµÉµtext(46, \"Descripci\\u00F3n \");\n          i0.ÉµÉµelementStart(47, \"span\", 24);\n          i0.ÉµÉµtext(48, \"*\");\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelement(49, \"textarea\", 29);\n          i0.ÉµÉµelementStart(50, \"div\", 26);\n          i0.ÉµÉµtext(51, \"La descripci\\u00F3n es requerida\");\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelementStart(52, \"div\", 21)(53, \"div\", 22)(54, \"label\", 23);\n          i0.ÉµÉµtext(55, \"Imagen del Libro\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(56, \"input\", 30);\n          i0.ÉµÉµlistener(\"change\", function AdminLibrosComponent_Template_input_change_56_listener($event) {\n            return ctx.onFileSelected($event);\n          });\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(57, \"small\", 5);\n          i0.ÉµÉµtext(58, \"Formatos: JPG, PNG, GIF. M\\u00E1ximo 5MB\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµtemplate(59, AdminLibrosComponent_div_59_Template, 4, 3, \"div\", 31)(60, AdminLibrosComponent_div_60_Template, 7, 1, \"div\", 32);\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(61, \"div\", 22)(62, \"label\", 23);\n          i0.ÉµÉµtext(63, \"Categor\\u00EDa\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(64, \"select\", 33)(65, \"option\", 34);\n          i0.ÉµÉµtext(66, \"Sin categor\\u00EDa\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµtemplate(67, AdminLibrosComponent_option_67_Template, 2, 2, \"option\", 35);\n          i0.ÉµÉµelementEnd()()();\n          i0.ÉµÉµelementStart(68, \"div\", 21)(69, \"div\", 22)(70, \"label\", 23);\n          i0.ÉµÉµtext(71, \"Cantidad Total \");\n          i0.ÉµÉµelementStart(72, \"span\", 24);\n          i0.ÉµÉµtext(73, \"*\");\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelement(74, \"input\", 36);\n          i0.ÉµÉµelementStart(75, \"div\", 26);\n          i0.ÉµÉµtext(76, \"La cantidad debe ser mayor a 0\");\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelementStart(77, \"div\", 22)(78, \"label\", 23);\n          i0.ÉµÉµtext(79, \"Cantidad Disponible \");\n          i0.ÉµÉµelementStart(80, \"span\", 24);\n          i0.ÉµÉµtext(81, \"*\");\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelement(82, \"input\", 37);\n          i0.ÉµÉµelementStart(83, \"div\", 26);\n          i0.ÉµÉµtext(84, \"La cantidad disponible no puede ser negativa\");\n          i0.ÉµÉµelementEnd()()();\n          i0.ÉµÉµelementStart(85, \"div\", 38)(86, \"button\", 39);\n          i0.ÉµÉµlistener(\"click\", function AdminLibrosComponent_Template_button_click_86_listener() {\n            return ctx.cerrarModal();\n          });\n          i0.ÉµÉµtext(87, \" Cancelar \");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(88, \"button\", 40);\n          i0.ÉµÉµtext(89);\n          i0.ÉµÉµelementEnd()()()()()()();\n          i0.ÉµÉµelementStart(90, \"div\", 41)(91, \"div\", 14)(92, \"div\", 15)(93, \"div\", 42)(94, \"h5\", 17);\n          i0.ÉµÉµtext(95, \" \\uD83D\\uDCDA Detalles del Libro \");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(96, \"button\", 18);\n          i0.ÉµÉµlistener(\"click\", function AdminLibrosComponent_Template_button_click_96_listener() {\n            return ctx.cerrarModalVer();\n          });\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµtemplate(97, AdminLibrosComponent_div_97_Template, 37, 11, \"div\", 43);\n          i0.ÉµÉµelementStart(98, \"div\", 38)(99, \"button\", 39);\n          i0.ÉµÉµlistener(\"click\", function AdminLibrosComponent_Template_button_click_99_listener() {\n            return ctx.cerrarModalVer();\n          });\n          i0.ÉµÉµtext(100, \" Cerrar \");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµtemplate(101, AdminLibrosComponent_button_101_Template, 2, 0, \"button\", 44);\n          i0.ÉµÉµelementEnd()()()();\n        }\n        if (rf & 2) {\n          let tmp_4_0;\n          let tmp_5_0;\n          let tmp_6_0;\n          let tmp_11_0;\n          let tmp_12_0;\n          i0.ÉµÉµadvance(16);\n          i0.ÉµÉµproperty(\"ngIf\", ctx.loading);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµproperty(\"ngIf\", !ctx.loading);\n          i0.ÉµÉµadvance(6);\n          i0.ÉµÉµtextInterpolate1(\" \", ctx.modoEdicion ? \"Editar Libro\" : \"Nuevo Libro\", \" \");\n          i0.ÉµÉµadvance(3);\n          i0.ÉµÉµproperty(\"formGroup\", ctx.libroForm);\n          i0.ÉµÉµadvance(7);\n          i0.ÉµÉµclassProp(\"is-invalid\", ((tmp_4_0 = ctx.libroForm.get(\"titulo\")) == null ? null : tmp_4_0.invalid) && ((tmp_4_0 = ctx.libroForm.get(\"titulo\")) == null ? null : tmp_4_0.touched));\n          i0.ÉµÉµadvance(8);\n          i0.ÉµÉµclassProp(\"is-invalid\", ((tmp_5_0 = ctx.libroForm.get(\"autor\")) == null ? null : tmp_5_0.invalid) && ((tmp_5_0 = ctx.libroForm.get(\"autor\")) == null ? null : tmp_5_0.touched));\n          i0.ÉµÉµadvance(8);\n          i0.ÉµÉµclassProp(\"is-invalid\", ((tmp_6_0 = ctx.libroForm.get(\"descripcion\")) == null ? null : tmp_6_0.invalid) && ((tmp_6_0 = ctx.libroForm.get(\"descripcion\")) == null ? null : tmp_6_0.touched));\n          i0.ÉµÉµadvance(10);\n          i0.ÉµÉµproperty(\"ngIf\", ctx.imagenSeleccionada && !ctx.imagenPreview);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµproperty(\"ngIf\", ctx.imagenPreview);\n          i0.ÉµÉµadvance(5);\n          i0.ÉµÉµproperty(\"value\", null);\n          i0.ÉµÉµadvance(2);\n          i0.ÉµÉµproperty(\"ngForOf\", ctx.categorias);\n          i0.ÉµÉµadvance(7);\n          i0.ÉµÉµclassProp(\"is-invalid\", ((tmp_11_0 = ctx.libroForm.get(\"cantidadTotal\")) == null ? null : tmp_11_0.invalid) && ((tmp_11_0 = ctx.libroForm.get(\"cantidadTotal\")) == null ? null : tmp_11_0.touched));\n          i0.ÉµÉµadvance(8);\n          i0.ÉµÉµclassProp(\"is-invalid\", ((tmp_12_0 = ctx.libroForm.get(\"cantidadDisponible\")) == null ? null : tmp_12_0.invalid) && ((tmp_12_0 = ctx.libroForm.get(\"cantidadDisponible\")) == null ? null : tmp_12_0.touched));\n          i0.ÉµÉµadvance(6);\n          i0.ÉµÉµproperty(\"disabled\", ctx.libroForm.invalid);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµtextInterpolate1(\" \", ctx.modoEdicion ? \"Actualizar\" : \"Crear\", \" Libro \");\n          i0.ÉµÉµadvance(8);\n          i0.ÉµÉµproperty(\"ngIf\", ctx.libroParaVer);\n          i0.ÉµÉµadvance(4);\n          i0.ÉµÉµproperty(\"ngIf\", ctx.libroParaVer);\n        }\n      },\n      dependencies: [i6.NgClass, i6.NgForOf, i6.NgIf, i5.ÉµNgNoValidate, i5.NgSelectOption, i5.ÉµNgSelectMultipleOption, i5.DefaultValueAccessor, i5.NumberValueAccessor, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.MinValidator, i5.FormGroupDirective, i5.FormControlName],\n      styles: [\".admin-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#eff6ff,#dbeafe,#bfdbfe);padding:20px 0}.page-title[_ngcontent-%COMP%]{color:var(--color-dark);font-weight:700;font-size:2rem;text-shadow:0 2px 4px rgba(30,58,138,.1)}.card[_ngcontent-%COMP%]{border-radius:1rem;border:none;box-shadow:0 4px 6px #2563eb26;transition:transform .2s,box-shadow .2s;background:#fff;border:1px solid rgba(37,99,235,.1)}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 16px #2563eb40;border-color:var(--color-primary)}.card-header[_ngcontent-%COMP%]{border-radius:1rem 1rem 0 0!important;font-weight:600;background:linear-gradient(90deg,var(--color-primary),var(--color-secondary))!important}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:2px solid var(--color-primary);font-weight:600;text-transform:uppercase;font-size:.85rem;letter-spacing:.5px;background:linear-gradient(180deg,var(--color-primary),var(--color-secondary));color:#fff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:var(--color-light-2)}.btn[_ngcontent-%COMP%]{border-radius:.5rem;font-weight:500;transition:all .2s}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--color-primary),var(--color-secondary));border:none}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #2563eb66;background:linear-gradient(90deg,var(--color-secondary),var(--color-accent))}.btn-warning[_ngcontent-%COMP%]{background-color:#f59e0b;border-color:#f59e0b}.btn-warning[_ngcontent-%COMP%]:hover{background-color:#d97706;border-color:#d97706;box-shadow:0 4px 8px #f59e0b4d}.btn-danger[_ngcontent-%COMP%]{background-color:#ef4444;border-color:#ef4444}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#dc2626;border-color:#dc2626;box-shadow:0 4px 8px #ef44444d}.btn-info[_ngcontent-%COMP%]{background:linear-gradient(90deg,#0ea5e9,#0284c7);border:none;color:#fff}.btn-info[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0ea5e966;background:linear-gradient(90deg,#0284c7,#0369a1);color:#fff}.modal-content[_ngcontent-%COMP%]{border-radius:1rem;border:none;box-shadow:0 10px 30px #2563eb33}.modal-header[_ngcontent-%COMP%]{border-radius:1rem 1rem 0 0;background:linear-gradient(90deg,var(--color-primary),var(--color-secondary))!important}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:var(--color-primary);box-shadow:0 0 0 .2rem #2563eb40}.badge[_ngcontent-%COMP%]{padding:.35em .65em;font-weight:500}.img-thumbnail[_ngcontent-%COMP%]{border-radius:.5rem}.dataTables_wrapper[_ngcontent-%COMP%]{padding-top:1rem}.dataTables_filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:.5rem;border:1px solid var(--color-accent);padding:.5rem;transition:all .2s}.dataTables_filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--color-primary);box-shadow:0 0 0 .2rem #2563eb40;outline:none}.dataTables_length[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:.5rem;border:1px solid var(--color-accent);padding:.5rem;transition:all .2s}.dataTables_length[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--color-primary);box-shadow:0 0 0 .2rem #2563eb40;outline:none}.badge.bg-secondary[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--color-primary),var(--color-secondary))!important;color:#fff}.badge.bg-success[_ngcontent-%COMP%]{background:linear-gradient(90deg,#10b981,#059669)!important}.badge.bg-danger[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ef4444,#dc2626)!important}@media (max-width: 768px){.page-title[_ngcontent-%COMP%]{font-size:1.5rem}.table-responsive[_ngcontent-%COMP%]{font-size:.9rem}}\"]\n    });\n  }\n  return AdminLibrosComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
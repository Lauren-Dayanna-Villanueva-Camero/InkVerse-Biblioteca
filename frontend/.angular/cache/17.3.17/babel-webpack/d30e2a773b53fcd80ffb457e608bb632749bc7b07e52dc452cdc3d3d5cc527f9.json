{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service\";\nimport * as i2 from \"../../services/auth.service\";\nimport * as i3 from \"../../services/alert.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction BooksComponent_option_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 40);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const categoria_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", categoria_r1.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", categoria_r1.nombre, \" \");\n  }\n}\nfunction BooksComponent_button_41_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 41);\n    i0.ɵɵlistener(\"click\", function BooksComponent_button_41_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.limpiarFiltros());\n    });\n    i0.ɵɵtext(1, \" \\uD83D\\uDDD1\\uFE0F Limpiar Filtros \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BooksComponent_div_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42)(1, \"div\", 43)(2, \"span\", 44);\n    i0.ɵɵtext(3, \"Cargando...\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"p\", 45);\n    i0.ɵɵtext(5, \"Cargando libros...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction BooksComponent_div_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 46)(1, \"strong\");\n    i0.ɵɵtext(2, \"\\u00A1Atenci\\u00F3n!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementStart(4, \"p\", 47)(5, \"small\");\n    i0.ɵɵtext(6, \"Por favor, aseg\\u00FArate de que el backend est\\u00E9 corriendo en \");\n    i0.ɵɵelementStart(7, \"code\");\n    i0.ɵɵtext(8, \"http://localhost:8080\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(9, \"button\", 48);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.error, \" \");\n  }\n}\nfunction BooksComponent_div_53_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 42)(1, \"div\", 49)(2, \"h5\");\n    i0.ɵɵtext(3, \"\\uD83D\\uDD0D No se encontraron libros\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 6);\n    i0.ɵɵtext(5, \"No hay libros que coincidan con los filtros seleccionados. Intenta con otros criterios de b\\u00FAsqueda.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 50);\n    i0.ɵɵlistener(\"click\", function BooksComponent_div_53_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.limpiarFiltros());\n    });\n    i0.ɵɵtext(7, \"Limpiar Filtros\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction BooksComponent_div_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42)(1, \"div\", 49)(2, \"h5\");\n    i0.ɵɵtext(3, \"\\uD83D\\uDCDA No hay libros disponibles en este momento\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 6);\n    i0.ɵɵtext(5, \"El cat\\u00E1logo est\\u00E1 vac\\u00EDo. Por favor, contacta al administrador para agregar libros.\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction BooksComponent_div_55_div_1_span_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 67);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const libro_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", libro_r6.categoria.nombre, \" \");\n  }\n}\nfunction BooksComponent_div_55_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 53)(1, \"div\", 54)(2, \"div\", 55)(3, \"img\", 56);\n    i0.ɵɵlistener(\"error\", function BooksComponent_div_55_div_1_Template_img_error_3_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.onImageError($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 57)(5, \"span\", 58);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"div\", 59)(8, \"h5\", 60);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\", 61)(11, \"small\");\n    i0.ɵɵtext(12, \"por \");\n    i0.ɵɵelementStart(13, \"strong\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(15, BooksComponent_div_55_div_1_span_15_Template, 2, 1, \"span\", 62);\n    i0.ɵɵelementStart(16, \"div\", 63)(17, \"p\", 64)(18, \"small\", 3)(19, \"strong\");\n    i0.ɵɵtext(20, \"Disponibles:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"span\", 65);\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(23, \"button\", 66);\n    i0.ɵɵlistener(\"click\", function BooksComponent_div_55_div_1_Template_button_click_23_listener() {\n      const libro_r6 = i0.ɵɵrestoreView(_r5).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.abrirDetalle(libro_r6));\n    });\n    i0.ɵɵtext(24, \" \\uD83D\\uDCD6 Ver Detalle \");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const libro_r6 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", ctx_r2.getImagenUrl(libro_r6.imagenUrl), i0.ɵɵsanitizeUrl)(\"alt\", libro_r6.titulo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", libro_r6.cantidadDisponible > 0 ? \"bg-success\" : \"bg-danger\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", libro_r6.cantidadDisponible > 0 ? \"Disponible\" : \"Agotado\", \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(libro_r6.titulo);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(libro_r6.autor);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", libro_r6.categoria);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngClass\", libro_r6.cantidadDisponible > 0 ? \"text-success\" : \"text-danger\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" \", libro_r6.cantidadDisponible, \" / \", libro_r6.cantidadTotal, \" \");\n  }\n}\nfunction BooksComponent_div_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 51);\n    i0.ɵɵtemplate(1, BooksComponent_div_55_div_1_Template, 25, 10, \"div\", 52);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.librosFiltrados);\n  }\n}\nfunction BooksComponent_div_63_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 77);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.selectedBook.categoria.nombre, \" \");\n  }\n}\nfunction BooksComponent_div_63_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 68)(1, \"div\", 69)(2, \"div\", 70)(3, \"img\", 71);\n    i0.ɵɵlistener(\"error\", function BooksComponent_div_63_Template_img_error_3_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.onImageError($event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 72)(5, \"h4\", 73);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 74)(8, \"strong\");\n    i0.ɵɵtext(9, \"Autor:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, BooksComponent_div_63_span_11_Template, 2, 1, \"span\", 75);\n    i0.ɵɵelementStart(12, \"div\", 73)(13, \"strong\");\n    i0.ɵɵtext(14, \"Disponibilidad:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"span\", 76);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(17, \"hr\");\n    i0.ɵɵelementStart(18, \"p\")(19, \"strong\");\n    i0.ɵɵtext(20, \"Descripci\\u00F3n:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"p\");\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", ctx_r2.getImagenUrl(ctx_r2.selectedBook.imagenUrl), i0.ɵɵsanitizeUrl)(\"alt\", ctx_r2.selectedBook.titulo);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.selectedBook.titulo);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.selectedBook.autor, \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedBook.categoria);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngClass\", ctx_r2.selectedBook.cantidadDisponible > 0 ? \"bg-success\" : \"bg-danger\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" \", ctx_r2.selectedBook.cantidadDisponible, \" / \", ctx_r2.selectedBook.cantidadTotal, \" disponibles \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r2.selectedBook.descripcion || \"Sin descripci\\u00F3n disponible.\");\n  }\n}\nexport let BooksComponent = /*#__PURE__*/(() => {\n  class BooksComponent {\n    apiService;\n    authService;\n    alertService;\n    router;\n    libros = [];\n    librosFiltrados = [];\n    categorias = [];\n    loading = false;\n    error = null;\n    selectedBook = null;\n    // Filtros\n    filtroNombre = '';\n    filtroCategoria = 'TODAS';\n    filtroDisponibilidad = 'TODOS'; // TODOS, DISPONIBLES, NO_DISPONIBLES\n    constructor(apiService, authService, alertService, router) {\n      this.apiService = apiService;\n      this.authService = authService;\n      this.alertService = alertService;\n      this.router = router;\n    }\n    ngOnInit() {\n      console.log('BooksComponent inicializado');\n      this.cargarLibros();\n      this.cargarCategorias();\n    }\n    cargarLibros() {\n      this.loading = true;\n      this.error = null;\n      this.apiService.listarLibros().subscribe({\n        next: libros => {\n          this.libros = libros;\n          this.aplicarFiltros();\n          this.loading = false;\n        },\n        error: () => {\n          this.error = 'Error al cargar los libros.';\n          this.loading = false;\n        }\n      });\n    }\n    cargarCategorias() {\n      this.apiService.listarCategorias().subscribe({\n        next: categorias => {\n          console.log('✅ Categorías cargadas:', categorias.length);\n          this.categorias = categorias;\n        },\n        error: err => {\n          console.error('❌ Error al cargar categorías:', err);\n          console.error('Detalles:', {\n            status: err.status,\n            url: err.url,\n            message: err?.error?.message || err.message\n          });\n          // No mostrar error al usuario, simplemente dejar el array vacío\n          this.categorias = [];\n        }\n      });\n    }\n    aplicarFiltros() {\n      let filtrados = [...this.libros];\n      // Filtro por nombre (título o autor)\n      if (this.filtroNombre.trim()) {\n        const busqueda = this.filtroNombre.toLowerCase().trim();\n        filtrados = filtrados.filter(libro => libro.titulo.toLowerCase().includes(busqueda) || libro.autor.toLowerCase().includes(busqueda));\n      }\n      // Filtro por categoría\n      if (this.filtroCategoria !== 'TODAS') {\n        const categoriaId = parseInt(this.filtroCategoria);\n        filtrados = filtrados.filter(libro => libro.categoria && libro.categoria.id === categoriaId);\n      }\n      // Filtro por disponibilidad\n      if (this.filtroDisponibilidad === 'DISPONIBLES') {\n        filtrados = filtrados.filter(libro => libro.cantidadDisponible > 0);\n      } else if (this.filtroDisponibilidad === 'NO_DISPONIBLES') {\n        filtrados = filtrados.filter(libro => libro.cantidadDisponible === 0);\n      }\n      this.librosFiltrados = filtrados;\n    }\n    limpiarFiltros() {\n      this.filtroNombre = '';\n      this.filtroCategoria = 'TODAS';\n      this.filtroDisponibilidad = 'TODOS';\n      this.aplicarFiltros();\n    }\n    abrirDetalle(libro) {\n      this.selectedBook = libro;\n      const modalEl = document.getElementById('bookModal');\n      if (modalEl) {\n        const modal = new bootstrap.Modal(modalEl);\n        modal.show();\n      }\n    }\n    getImagenUrl(imagenUrl) {\n      if (!imagenUrl) {\n        return 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIyMCIgZmlsbD0iI2RkZCIvPjx0ZXh0IHg9IjE1MCIgeT0iMTEwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5MaWJybzwvdGV4dD48L3N2Zz4=';\n      }\n      // Si es una URL completa, devolverla tal cual\n      if (imagenUrl.startsWith('http://') || imagenUrl.startsWith('https://')) {\n        return imagenUrl;\n      }\n      // Si es una ruta relativa (como /uploads/...), construir la URL completa\n      if (imagenUrl.startsWith('/')) {\n        // Evitar duplicar el puerto\n        if (imagenUrl.includes('localhost:8080')) {\n          return imagenUrl;\n        }\n        return `http://localhost:8080${imagenUrl}`;\n      }\n      return imagenUrl;\n    }\n    onImageError(event) {\n      // Usar una imagen SVG inline para evitar loops infinitos\n      event.target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIyMCIgZmlsbD0iI2RkZCIvPjx0ZXh0IHg9IjE1MCIgeT0iMTEwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5MaWJybzwvdGV4dD48L3N2Zz4=';\n      event.target.onerror = null; // Prevenir loops infinitos\n    }\n    prestarSeleccionado() {\n      if (!this.selectedBook) {\n        return;\n      }\n      if (!this.authService.isLoggedIn()) {\n        // Cerrar el modal del libro si está abierto\n        const modalEl = document.getElementById('bookModal');\n        if (modalEl) {\n          const modal = bootstrap.Modal.getInstance(modalEl);\n          if (modal) {\n            modal.hide();\n          }\n        }\n        // Redirigir al login\n        this.alertService.warning('Sesión requerida', 'Debes iniciar sesión para prestar un libro.').then(() => {\n          this.router.navigate(['/login']);\n        });\n        return;\n      }\n      this.apiService.prestarLibro(this.selectedBook.id).subscribe({\n        next: () => {\n          this.cargarLibros();\n          const modalEl = document.getElementById('bookModal');\n          if (modalEl) {\n            const modal = bootstrap.Modal.getInstance(modalEl);\n            if (modal) {\n              modal.hide();\n            }\n          }\n          this.alertService.success('Libro prestado', 'El libro ha sido prestado correctamente.');\n        },\n        error: err => {\n          const msg = err?.error?.message || 'Error al prestar el libro.';\n          this.alertService.error('Error al prestar', msg);\n        }\n      });\n    }\n    getTotalLibros() {\n      return this.libros.length;\n    }\n    getLibrosDisponibles() {\n      return this.libros.filter(l => l.cantidadDisponible > 0).length;\n    }\n    static ɵfac = function BooksComponent_Factory(t) {\n      return new (t || BooksComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.AlertService), i0.ɵɵdirectiveInject(i4.Router));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: BooksComponent,\n      selectors: [[\"app-books\"]],\n      decls: 69,\n      vars: 16,\n      consts: [[1, \"books-container\"], [1, \"text-center\", \"mb-4\"], [1, \"page-title\"], [1, \"text-muted\"], [1, \"card\", \"shadow-sm\", \"mb-4\"], [1, \"card-header\", \"bg-primary\", \"text-white\"], [1, \"mb-0\"], [1, \"card-body\"], [1, \"row\", \"g-3\"], [1, \"col-md-4\"], [1, \"form-label\"], [1, \"input-group\"], [1, \"input-group-text\"], [\"type\", \"text\", \"placeholder\", \"Escribe el t\\u00EDtulo o autor...\", 1, \"form-control\", 3, \"ngModelChange\", \"input\", \"ngModel\"], [1, \"form-select\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"TODAS\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"value\", \"TODOS\"], [\"value\", \"DISPONIBLES\"], [\"value\", \"NO_DISPONIBLES\"], [1, \"row\", \"mt-3\"], [1, \"col-12\"], [\"class\", \"btn btn-outline-secondary\", 3, \"click\", 4, \"ngIf\"], [1, \"d-flex\", \"gap-2\", \"flex-wrap\"], [1, \"badge\", \"bg-primary\"], [1, \"badge\", \"bg-success\"], [1, \"badge\", \"bg-info\"], [\"class\", \"text-center my-5\", 4, \"ngIf\"], [\"class\", \"alert alert-warning alert-dismissible fade show\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"row g-4\", 4, \"ngIf\"], [\"id\", \"bookModal\", \"tabindex\", \"-1\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\", \"modal-lg\", \"modal-dialog-centered\"], [1, \"modal-content\"], [1, \"modal-header\", \"bg-primary\", \"text-white\"], [1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn-close\", \"btn-close-white\"], [\"class\", \"modal-body\", 4, \"ngIf\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-outline-secondary\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\", \"disabled\"], [3, \"value\"], [1, \"btn\", \"btn-outline-secondary\", 3, \"click\"], [1, \"text-center\", \"my-5\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\", 2, \"width\", \"3rem\", \"height\", \"3rem\"], [1, \"visually-hidden\"], [1, \"mt-3\", \"text-muted\"], [\"role\", \"alert\", 1, \"alert\", \"alert-warning\", \"alert-dismissible\", \"fade\", \"show\"], [1, \"mb-0\", \"mt-2\"], [\"type\", \"button\", \"data-bs-dismiss\", \"alert\", 1, \"btn-close\"], [1, \"alert\", \"alert-info\"], [1, \"btn\", \"btn-primary\", \"mt-3\", 3, \"click\"], [1, \"row\", \"g-4\"], [\"class\", \"col-sm-6 col-md-4 col-lg-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-sm-6\", \"col-md-4\", \"col-lg-3\"], [1, \"card\", \"card-book\", \"h-100\", \"shadow-sm\"], [1, \"card-img-wrapper\"], [1, \"card-img-top\", 3, \"error\", \"src\", \"alt\"], [1, \"card-overlay\"], [1, \"badge\", 3, \"ngClass\"], [1, \"card-body\", \"d-flex\", \"flex-column\"], [1, \"card-title\", \"mb-2\"], [1, \"card-text\", \"text-muted\", \"mb-2\"], [\"class\", \"badge badge-category mb-2\", 4, \"ngIf\"], [1, \"mt-auto\"], [1, \"mb-2\"], [3, \"ngClass\"], [1, \"btn\", \"btn-primary\", \"w-100\", 3, \"click\"], [1, \"badge\", \"badge-category\", \"mb-2\"], [1, \"modal-body\"], [1, \"row\"], [1, \"col-md-4\", \"mb-3\", \"mb-md-0\", \"text-center\"], [1, \"img-fluid\", \"rounded\", \"shadow-sm\", 2, \"max-height\", \"300px\", \"object-fit\", \"contain\", 3, \"error\", \"src\", \"alt\"], [1, \"col-md-8\"], [1, \"mb-3\"], [1, \"text-muted\", \"mb-3\"], [\"class\", \"badge bg-secondary mb-3\", 4, \"ngIf\"], [1, \"badge\", \"ms-2\", 3, \"ngClass\"], [1, \"badge\", \"bg-secondary\", \"mb-3\"]],\n      template: function BooksComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\", 2);\n          i0.ɵɵtext(3, \"\\uD83D\\uDCDA Cat\\u00E1logo de Libros\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"p\", 3);\n          i0.ɵɵtext(5, \"Explora nuestro cat\\u00E1logo y encuentra tus libros favoritos\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"div\", 4)(7, \"div\", 5)(8, \"h5\", 6);\n          i0.ɵɵtext(9, \"\\uD83D\\uDD0D Buscar y Filtrar\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(10, \"div\", 7)(11, \"div\", 8)(12, \"div\", 9)(13, \"label\", 10)(14, \"strong\");\n          i0.ɵɵtext(15, \"Buscar por nombre o autor:\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(16, \"div\", 11)(17, \"span\", 12);\n          i0.ɵɵtext(18, \"\\uD83D\\uDD0E\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"input\", 13);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function BooksComponent_Template_input_ngModelChange_19_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.filtroNombre, $event) || (ctx.filtroNombre = $event);\n            return $event;\n          });\n          i0.ɵɵlistener(\"input\", function BooksComponent_Template_input_input_19_listener() {\n            return ctx.aplicarFiltros();\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(20, \"div\", 9)(21, \"label\", 10)(22, \"strong\");\n          i0.ɵɵtext(23, \"Filtrar por categor\\u00EDa:\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(24, \"select\", 14);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function BooksComponent_Template_select_ngModelChange_24_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.filtroCategoria, $event) || (ctx.filtroCategoria = $event);\n            return $event;\n          });\n          i0.ɵɵlistener(\"change\", function BooksComponent_Template_select_change_24_listener() {\n            return ctx.aplicarFiltros();\n          });\n          i0.ɵɵelementStart(25, \"option\", 15);\n          i0.ɵɵtext(26, \"Todas las categor\\u00EDas\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(27, BooksComponent_option_27_Template, 2, 2, \"option\", 16);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(28, \"div\", 9)(29, \"label\", 10)(30, \"strong\");\n          i0.ɵɵtext(31, \"Filtrar por disponibilidad:\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(32, \"select\", 14);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function BooksComponent_Template_select_ngModelChange_32_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.filtroDisponibilidad, $event) || (ctx.filtroDisponibilidad = $event);\n            return $event;\n          });\n          i0.ɵɵlistener(\"change\", function BooksComponent_Template_select_change_32_listener() {\n            return ctx.aplicarFiltros();\n          });\n          i0.ɵɵelementStart(33, \"option\", 17);\n          i0.ɵɵtext(34, \"Todos\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(35, \"option\", 18);\n          i0.ɵɵtext(36, \"Solo disponibles\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(37, \"option\", 19);\n          i0.ɵɵtext(38, \"No disponibles\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(39, \"div\", 20)(40, \"div\", 21);\n          i0.ɵɵtemplate(41, BooksComponent_button_41_Template, 2, 0, \"button\", 22);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(42, \"div\", 20)(43, \"div\", 21)(44, \"div\", 23)(45, \"span\", 24);\n          i0.ɵɵtext(46);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(47, \"span\", 25);\n          i0.ɵɵtext(48);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(49, \"span\", 26);\n          i0.ɵɵtext(50);\n          i0.ɵɵelementEnd()()()()()();\n          i0.ɵɵtemplate(51, BooksComponent_div_51_Template, 6, 0, \"div\", 27)(52, BooksComponent_div_52_Template, 10, 1, \"div\", 28)(53, BooksComponent_div_53_Template, 8, 0, \"div\", 27)(54, BooksComponent_div_54_Template, 6, 0, \"div\", 27)(55, BooksComponent_div_55_Template, 2, 1, \"div\", 29);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(56, \"div\", 30)(57, \"div\", 31)(58, \"div\", 32)(59, \"div\", 33)(60, \"h5\", 34);\n          i0.ɵɵtext(61);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(62, \"button\", 35);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(63, BooksComponent_div_63_Template, 23, 9, \"div\", 36);\n          i0.ɵɵelementStart(64, \"div\", 37)(65, \"button\", 38);\n          i0.ɵɵtext(66, \" Cerrar \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(67, \"button\", 39);\n          i0.ɵɵlistener(\"click\", function BooksComponent_Template_button_click_67_listener() {\n            return ctx.prestarSeleccionado();\n          });\n          i0.ɵɵtext(68, \" \\uD83D\\uDCDA PRESTAR \");\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(19);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.filtroNombre);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.filtroCategoria);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.categorias);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.filtroDisponibilidad);\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"ngIf\", ctx.filtroNombre || ctx.filtroCategoria !== \"TODAS\" || ctx.filtroDisponibilidad !== \"TODOS\");\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\"Total: \", ctx.getTotalLibros(), \"\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\"Disponibles: \", ctx.getLibrosDisponibles(), \"\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\"Mostrando: \", ctx.librosFiltrados.length, \"\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.error && ctx.librosFiltrados.length === 0 && ctx.libros.length > 0);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.error && ctx.libros.length === 0);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.error && ctx.librosFiltrados.length > 0);\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate1(\" \", ctx.selectedBook == null ? null : ctx.selectedBook.titulo, \" \");\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedBook);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"disabled\", ctx.selectedBook && ctx.selectedBook.cantidadDisponible === 0);\n        }\n      },\n      dependencies: [i5.NgClass, i5.NgForOf, i5.NgIf, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgModel],\n      styles: [\".books-container[_ngcontent-%COMP%]{min-height:100vh;padding:20px 0}.page-title[_ngcontent-%COMP%]{color:#667eea;font-weight:700;text-shadow:2px 2px 4px rgba(0,0,0,.1);letter-spacing:.03em}.card-book[_ngcontent-%COMP%]{border:none;border-radius:15px;transition:all .3s ease;overflow:hidden;background:#fff}.card-book[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 25px #00000026!important}.card-img-wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden;height:250px;background:linear-gradient(135deg,#667eea,#764ba2)}.card-img-top[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.card-book[_ngcontent-%COMP%]:hover   .card-img-top[_ngcontent-%COMP%]{transform:scale(1.1)}.card-overlay[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.card-body[_ngcontent-%COMP%]{padding:1.25rem}.card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#333;min-height:3rem;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.badge-category[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:.4em .8em;border-radius:20px;font-size:.85em}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:8px;font-weight:500;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #667eea66}.card-header[_ngcontent-%COMP%]{border-radius:10px 10px 0 0!important}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.input-group-text[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none}.modal-header.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)!important}.badge[_ngcontent-%COMP%]{font-size:.85em;padding:.5em .75em;border-radius:20px}.alert[_ngcontent-%COMP%]{border-radius:10px;border:none}.spinner-border[_ngcontent-%COMP%]{border-width:.3em}@media (max-width: 768px){.card-img-wrapper[_ngcontent-%COMP%]{height:200px}.page-title[_ngcontent-%COMP%]{font-size:1.8rem}}\"]\n    });\n  }\n  return BooksComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}